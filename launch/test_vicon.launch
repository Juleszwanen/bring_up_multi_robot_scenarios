<?xml version="1.0"?>

<launch>
<arg name="gui" default="false" />
  <arg name="project_name" default="" />
  <!-- <arg name="roadmap" default="maps/mobile_robotics_lab/straight.xml"/> -->
  <arg name="roadmap" default="maps/mobile_robotics_lab/diagonal.xml"/>

  <arg name="jackal_name" default="jackal1"/>

  <!-- Add robot description to publish base_link and other transforms -->
  <include file="$(find jackal_description)/launch/description.launch"/>

  <node pkg="tf2_ros" type="static_transform_publisher" name="odom_to_base_link_relay"
        args="0 0 0 0 0 0 1 odom base_link"/>

 <!-- Start the vicon bridge -->
  <include file="$(find vicon_bridge)/launch/vicon.launch">
      <!-- <arg name="object_names" value="[$(arg jackal_name), jackal2]"/> -->
      <arg name="object_names" value="[$(arg jackal_name)]"/>
      <!-- <arg name="object_names" value="[$(arg jackal_name), dynamic_object1, dynamic_object2, dynamic_object3, dynamic_object5, dingo1, dingo2]"/> -->
      <!-- <arg name="object_msg_types" default="[geometry_msgs/PoseWithCovarianceStamped, geometry_msgs/PoseWithCovarianceStamped]"/> -->
      <arg name="object_msg_types" default="[geometry_msgs/PoseWithCovarianceStamped]"/>
      <!-- <arg name="object_frame_ids" default="[map, map]"/> -->
      <arg name="object_frame_ids" default="[map]"/>
      <!-- <arg name="object_publish_topics" default="[/vicon/$(arg jackal_name), /vicon/jackal2]"/> -->
      <arg name="object_publish_topics" default="[/vicon/$(arg jackal_name)]"/>
      <!-- <arg name="object_publish_topics" default="[/vicon/$(arg jackal_name), /vicon/dynamic_object1, /vicon/dynamic_object2, /vicon/dynamic_object3, /vicon/dynamic_object5, /vicon/dingo1, /vicon/dingo2]"/> -->
      <!-- <arg name="object_frequency_divider" default="[2, 2]"/> -->
      <arg name="object_frequency_divider" default="[2]"/>
  </include>

  <!-- Bundle dynamic obstacles in one convenient message -->
  <include file="$(find vicon_util)/launch/bundle_obstacles.launch">
    <arg name="run_ekfs" value="true"/>
    <arg name="visualize_scene" value="true"/>
    <arg name="robot_topic" value="$(arg jackal_name)"/>
    <!-- 5 Objects -->
    <!-- <arg name="dynamic_object_topics" default="[$(arg jackal_name), jackal2]"/> -->
    <arg name="dynamic_object_topics" default="[$(arg jackal_name)]"/>
    <!-- <arg name="dynamic_object_topics" default="[$(arg jackal_name), dynamic_object1, dynamic_object2, dynamic_object3, dingo1, dingo2]"/> -->
    <!-- 2 Objects -->
    <!-- <arg name="dynamic_object_topics" default="[$(arg jackal_name), dynamic_object1, dynamic_object2]"/>  -->
    <arg name="dynamic_object_radius" default="0.4"/>
    <arg name="static_object_topics" default="[]"/>
    <arg name="static_object_radius" default="0.3"/>
    <arg name="static_object_sizes" default="[]"/>
  </include>

    <!-- <node name="rviz" pkg="rviz" type="rviz" args="-d $(find mpc_planner_jackal)/rviz/ros1.rviz" output="screen"/> -->

</launch>